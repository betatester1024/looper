{
  "version": 3,
  "sources": ["../../frontend/utils.ts"],
  "sourcesContent": ["// import dialogPolyfill from './nodemodules/dialog-polyfill/dist/dialog-polyfill.esm.js';\nlet SESSIONTIMEOUT, SESSIONTIMEOUT2 = null;\n\nfunction byId(name:string) {\n  let ele = document.getElementById(name);\n  // if (ele == null) throw \"Element with id \"+name+\" is null\";\n  return ele;\n}\nfunction byClass(name:string, ct:number=0) {\n  return document.getElementsByClassName(name).item(ct);\n}\nconst docURL = new URL(document.URL);\nlet HASNETWORK = false;\nlet branch = \"STABLE\";\nlet userData = null;\nlet onloadCallback:()=>any = null;\n\nfunction fadeIn() {\n  let elementsArray = document.getElementsByClassName(\"content-fadein\");\n  console.log(\"checking.\")\n  for (var i = 0; i < elementsArray.length; i++) {\n    var elem = elementsArray[i]\n    var distInView = elem.getBoundingClientRect().top - window.innerHeight + 50;\n    if (distInView < 0) {\n        elem.classList.add(\"inView\");\n    } else {\n        elem.classList.remove(\"inView\");\n    }\n  }\n}\n\nasync function globalOnload(cbk:()=>any, networkLess:boolean=false, link:string=\"/server\") {\n  onloadCallback = cbk;\n  bSelInitialise();\n  if (!networkLess) {\n    var script = document.createElement('script');\n    script.src = \"https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js\";\n    document.head.appendChild(script);\n    script.onload=()=>{\n      WebFont.load({\n        google: {\n          families: ['Noto Sans Mono', \"Raleway:100,200,400,500,600,700,900\",\n                     'Noto Sans Display', 'Noto Color Emoji']\n        }\n      });\n      console.log(\"Font loaded!\")\n    }\n    script = document.createElement('script');\n    script.src = \"/nodemodules/dialog-polyfill/dist/dialog-polyfill.js\";\n    document.head.appendChild(script);\n  }\n  // else byId(\"overlayL\").remove();\n  HASNETWORK = !networkLess;\n  // load NotoSansMono\n  // const NSM = new FontFace('Noto Sans Mono', 'url(https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&display=swap)');\n  // await NSM.load();\n  // document.fonts.add(NSM);\n\n\n  document.addEventListener(\"keydown\", keydown);\n  document.onpointerup=pointerUp;\n  document.onpointermove = pointerMove;\n  // console.log(elementsArray);\n  byClass(\"main_content\").setAttribute(\"tabindex\", \"0\");\n\n\n  fadeIn();\n  document.body.addEventListener(\"mouseover\", mouseOver);\n\n  // byId(\"overlay\").onclick=(e:Event)=>{\n  //   if (ALERTOPEN) {\n  //     console.log(\"ClickOutside (Reject)\")\n  //     closeAlert(-1);\n  //   }\n  // };\n  if (!byId(\"overlay\")) \n  {\n    let ovr = document.createElement(\"div\");\n    ovr.id=\"overlay\";\n    document.body.appendChild(ovr);\n  }\n\n  \n  let spacer = document.createElement(\"div\");\n  spacer.id = \"spacer\";\n\n  \n  if (!networkLess) {\n    send(JSON.stringify({action:\"startupData\"}), (res)=>{\n      if (res.data.branch) branch = res.data.branch;\n      let startupData = res.data;\n\n      send(JSON.stringify({ action: \"userRequest\" }),\n        (res) => {\n          userData = res.data;\n          if (branch == \"unstable\" && link == \"/server\") {\n            let mainContent = byClass(\"main_content\");\n            mainContent.style.width = \"calc(100% - 30px)\";\n            mainContent.style.margin = \"0px\";\n            let box = document.createElement(\"p\");\n            box.className = \"sidebar-unstable\";\n            box.innerHTML = `<span class=\"material-symbols-outlined\">warning</span>\\\n            Unstable version. Features may be unfinished or broken. \n            <a class=\"grn\" href=\"${startupData.domain}\">Switch to stable branch</a>`;\n            document.body.appendChild(box);\n          }\n          // document.documentElement.className = res.data.darkQ?\"dark\":\"\";\n          // console.log(\"Dark mode toggle:\",res.data.darkQ);\n          // let overlay = document.getElementById(\"overlayL\");\n          // if (overlay) {\n          //   // overlay.style.left=\"0vh\";\n          //   overlay.style.opacity=\"0\";\n          // }\n          let maincontent = document.getElementsByClassName(\"main_content\").item(0) as HTMLDivElement;\n          let ftr = byId(\"ftrOverride\")??document.createElement(\"footer\");\n          if (!byId(\"ftrOverride\")) maincontent.appendChild(ftr);\n\n          let ele = document.createElement(\"p\");\n          ele.id=\"footer\";\n          let urlEle = new URL(location.href);\n          let redirector = urlEle.pathname + \"?\"+urlEle.searchParams.toString();\n          if (link !=\"/server\" && res.status != \"SUCCESS\") \n            // external site template.\n            ele.innerHTML = `<a href=\"${startupData.domain}\">BetaOS Services site</a> | \n                          <form class=\"inpContainer szThird nobreak\" action=\"javascript:location.href='/'+byId('ftrNav').value\" style=\"margin: 2px;\">\n                            <input type=\"text\" id=\"ftrNav\" class=\"fssml sz100 ftrInput\" placeholder=\"Navigate... (/)\">\n                            <div class=\"anim\"></div>\n                          </form>`\n          else if (res.status != \"SUCCESS\") {\n            ele.innerHTML = `<a href=\"/login?redirect=${encodeURIComponent(redirector)}\" onclick=\"login_v2(event)\">Administrator login</a> | \n                          <form class=\"inpContainer szThird nobreak\" action=\"javascript:location.href='/'+byId('ftrNav').value\" style=\"margin: 2px;\">\n                            <input type=\"text\" id=\"ftrNav\" class=\"fssml sz100 ftrInput\" placeholder=\"Navigate... (/)\">\n                            <div class=\"anim\"></div>\n                          </form>\n                          `;\n\n          }\n          else if (res.status == \"SUCCESS\" && link == \"/server\") { // internal, logged in\n            resetExpiry(res);\n            ele.innerHTML = `Welcome, <kbd>${res.data.user}</kbd> |\n                          <a href='/logout' onclick='logout_v2(event)'>Logout</a> | \n                          <a href='/config'>Control panel</a> | \n                          <form class=\"inpContainer szThird nobreak\" action=\"javascript:location.href='/'+byId('ftrNav').value\" style=\"margin: 2px;\">\n                            <input type=\"text\" id=\"ftrNav\" class=\"fssml sz100 ftrInput\" placeholder=\"Navigate... (/)\">\n                            <div class=\"anim\"></div>\n                          </form>`;\n          }\n          else  // external, logged in\n          {\n            ele.innerHTML = `Welcome, <kbd>${res.data.user}</kbd> |\n                          <a href='${startupData.domain}/logout'>Logout</a> | \n                          <a href=\"${startupData.domain}\">BetaOS Services site</a> | \n                          <form class=\"inpContainer szThird nobreak\" action=\"javascript:location.href='/'+byId('ftrNav').value\" style=\"margin: 2px;\">\n                            <input type=\"text\" id=\"ftrNav\" class=\"fssml sz100 ftrInput\" placeholder=\"Navigate... (/)\">\n                            <div class=\"anim\"></div>\n                          </form>`;\n          }\n          ftr.prepend(ele);\n          let ephDiv = byId(\"ephemerals\")??document.createElement(\"div\");\n          if (!ephDiv.id) {\n            ephDiv.id = \"ephemerals\";\n            document.body.appendChild(ephDiv);\n          }\n          /* send(JSON.stringify({ action: \"visits\" }),\n            (res) => {\n\n              if (res.status != \"SUCCESS\") {\n                alertDialog(\"Database connection failure. Please contact BetaOS. Error: \"+res.data.error, ()=>{});\n                ele.innerHTML = `<kbd class=\"red nohover\">Database connection failure.</kbd>`\n              }// this means the database died \n              // else document.getElementById(\"footer\").innerHTML += \" | <kbd>Total requests made: \"+res.data.data+\"</kbd>\";\n              send(JSON.stringify({action:\"cookieRequest\"}), (res)=>{\n                if (res.data.toString() == \"false\") {\n                  // console.log(\"thing\");\n\n\n                  let cpl = document.getElementById(\"compliance\");\n                  cpl.style.opacity=\"1\";\n                  cpl.style.height=\"auto\";\n                  cpl.style.pointerEvents=\"auto\";\n                  // document.getElementById(\"compliance\").style.top=\"unset\";\n                }\n                else {\n                  let cpl = document.getElementById(\"compliance\");\n                  cpl.style.opacity=\"0\";\n                  cpl.style.pointerEvents=\"none\";\n                }\n                if (cbk) cbk();\n              }, true, link);\n            }, true, link);\n          */\n        }, true, link); // userRequest\n    },true, link); // startupData\n  }\n\n  let ele2 = document.getElementById(\"overlay\");\n  if (ele2)\n    ele2.innerHTML = `<div class=\"internal\" style=\"opacity: 0; text-align: center !important\"> </div>`\n  document.body.innerHTML += `\n  <div id=\"compliance\" style=\"display:none\">\n    <h2 class=\"blu nohover fssml\"><span class=\"material-symbols-outlined\">cookie </span> BetaOS Services uses cookies to operate.</h2>\n    <p style=\"font-size: 10px\">We use only <kbd>strictly necessary cookies</kbd> to verify and persist \n    your login session, and to confirm your acceptance of these cookies. <br>\n    By continuing to use this site, you consent to our use of these cookies.</p>\n    <button class='blu btn fssml' onclick=\"acceptCookies('${link}')\">\n    <span class=\"material-symbols-outlined\" style=\"font-size: 20pt !important\">check</span>\n    I understand\n    <div class=\"anim\"></div>\n    </button>\n  </div>`;\n  if (networkLess) {\n    let cpl = document.getElementById(\"compliance\");\n    cpl.style.opacity=\"1\"; \n    cpl.style.height=\"auto\";\n  }\n  byClass(\"main_content\").onscroll = fadeIn; \n              // cpl.style.pointerEvents=\"none\";\n}\nlet DRAGGING = null;\nlet origLeft = -1;\nlet origTop = -1;\nlet origX = -1;\nlet lastPtrUp = -1;\nlet origY = -1;\nfunction pointerUp(ev:PointerEvent) \n{\n  DRAGGING = null;\n  origLeft = -1;\n  origTop = -1;\n  // if (ev.target.className == \"close red\") closeNBD(ev.target.parentElement.parentElement, false)\n\n  // if (ev.target.nodeName == \"SPAN\" && ev.target.parentElement &&\n      // ev.target.closest(\".ALERT_NONBLOCK\") != null)  \n    // closeNBD(ev.target.parentElement.parentElement.parentElement, false)\n  if (ev.target instanceof HTMLDocument) return; // released outside the doc\n  if (ev.target.classList.contains(\"ALERT_DRAGGER\")) {\n    if (Date.now() - lastPtrUp < 300) // up-up = doubleclick\n    {\n      toggleNBDFullScr(ev.target.closest(\".ALERT_NONBLOCK\").querySelector(\".content\"))\n    }\n    else console.log(Date.now() - lastPtrUp)\n    lastPtrUp = Date.now();\n  }\n}\nfunction toggleNBDFullScr(contentEle:HTMLDivElement) \n{\n  // let ele = contentEle.parentElement.querySelector(\".fullscr > span\");\n  // ele.\n  if (contentEle.dataset.fullscreen==\"no\") contentEle.parentElement.classList.add(\"fscr\");\n  else contentEle.parentElement.classList.remove(\"fscr\");\n  contentEle.dataset.fullscreen = contentEle.dataset.fullscreen==\"no\"?\"yes\":\"no\";\n  contentEle.style.height = contentEle.style.height?\"\":(\n    contentEle.classList.contains(\"hasBtn\")?\"calc(100vh - 200px)\":\"calc(100vh - 100px)\");\n  contentEle.style.width = contentEle.style.width?\"\":\"calc(100vw - 50px)\";\n  let ele = contentEle.parentElement.querySelector(\".fullscr > span\");\n  if (contentEle.dataset.fullscreen==\"yes\") ele.innerText = \"close_fullscreen\";\n  else ele.innerText = \"fullscreen\";\n }\nfunction pointerMove(ev:PointerEvent) \n{\n  if (DRAGGING) {\n    DRAGGING.parentElement.style.left = origLeft+ev.screenX - origX+\"px\";\n    DRAGGING.parentElement.style.top = origTop+ev.screenY-origY+\"px\";\n    ev.preventDefault();\n    ev.stopPropagation();\n  }\n}\nfunction pointerDown(ev:PointerEvent) {\n  if (ev.currentTarget.parentElement.querySelector(\".content\").dataset.fullscreen == \"yes\") return false;\n  DRAGGING = ev.currentTarget;\n  // document.body.appendChild(DRAGGING.parentElement);\n  ev.preventDefault();\n  ev.stopPropagation();\n  origX = ev.screenX;\n  origY = ev.screenY;\n  origLeft = toIntPx(window.getComputedStyle(DRAGGING.parentElement).left);\n  origTop = toIntPx(window.getComputedStyle(DRAGGING.parentElement).top);\n}\n\nfunction toIntPx(val:string) {\n  return Number(val.replace(\"px\", \"\"));\n}\n\nfunction toggleMobileNav() {\n  let navbar = byId(\"navTop\");\n\n  if (navbar.classList.contains(\"open\")) {\n    navbar.classList.remove(\"open\");\n    byId(\"mNav\").querySelector(\".material-symbols-outlined\").innerText = \"menu\";\n  }\n  else {\n    navbar.classList.add(\"open\");\n    byId(\"mNav\").querySelector(\".material-symbols-outlined\").innerText = \"close\";\n  }\n}\n\nfunction decodeStatus(status:number) {\n  switch(status) \n  {\n    case 0: return \"Network failure\"\n    case 200: return \"Success\"\n    case 502: return \"Internal Server Error\"\n    case 404: return \"Not found\"\n    case 429: return \"Too many requests\"\n    case 403: return \"Forbidden\"\n    case 401: return \"Unauthorised\"\n    case 400: return \"Invalid request\"\n    case 413: return \"Request too large\"\n    case 500: \n    case 503:\n      return \"Internal Server Error\"\n  }  \n  return \"Unknown error\";\n}\n\nfunction send(params: any, callback: (thing: any) => any, silentLoading:boolean=false, link:string=\"/server\") {\n  let overlay = document.getElementById(\"overlayL\");\n  if (overlay && !silentLoading) {\n    console.log(\"overlay active\")\n    overlay.style.opacity=\"1\";\n    overlay.style.backgroundColor=\"var(--system-overlay)\";\n    overlay.style.pointerEvents=\"auto\";\n    byId(\"overlayLContainer\").style.opacity=1;\n    byId(\"overlayLContainer\").style.pointerEvents=\"auto\";\n  }\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"POST\", link, true);\n  xhr.setRequestHeader(\"Content-type\", \"application/json; charset=utf-8\");\n  xhr.onreadystatechange = () => {\n    if (xhr.readyState == 4 && xhr.status == 200) {\n\n      // if (failureTimeout) clearTimeout(failureTimeout);\n\n      // failureTimeout = null;\n      let resp = JSON.parse(xhr.responseText);\n      if (resp.status != \"SUCCESS\" && resp.data.refreshRequired) {\n        alertDialog(\"Request failed requiring reload: \"+resp.data.error, ()=>{location.reload();});\n      }\n      else callback(JSON.parse(xhr.responseText));\n    }\n    else if (xhr.readyState == 4 && xhr.status != 200) {\n      // if (failureTimeout) clearTimeout(failureTimeout);\n      // else closeAlert(true);\n      // failureTimeout = null;\n      alertDialog(\"Received status code \" +xhr.status+\" (\"+decodeStatus(xhr.status)+\") -- resend request?\", ()=>{send(params, callback, silentLoading);}, true);\n\n    }\n    if (overlay) {\n      overlay.style.opacity=\"0\";\n      overlay.style.pointerEvents=\"none\";\n      overlay.style.backgroundColor=\"var(--system-grey2)\";\n      byId(\"overlayLContainer\").style.opacity=0;\n      byId(\"overlayLContainer\").style.pointerEvents=\"none\";\n    } else closeAlert(-1);\n  }\n  console.log(\"about to send with params:\", params);\n  xhr.withCredentials = true;\n  xhr.send(params);\n  // let failureTimeout = setTimeout(() => {\n  //   failureTimeout = null;\n  //   alertDialog(`This is taking longer than expected.`, (res) => {callback(res);}, 1, params)\n  // }, 5000);\n}\n\nfunction acceptCookies(link:string=\"/server\") {\n  let cpm = document.getElementById(\"compliance\") as HTMLDivElement;\n  cpm.style.transition=\"all 0.5s ease\";\n  cpm.style.opacity=\"0\";\n  cpm.style.pointerEvents=\"none\";\n  send(JSON.stringify({action:\"acceptCookies\"}), (res)=> {}, false, link);\n\n}\n\n// set text to \"NOCONFIRM\" to remove the confirm button\nfunction nonBlockingDialog(data:{\n  text:string, \n  colour?:string,\n  continueText?:string,\n  hasButton?:boolean,\n  ico?:string,\n  title?:string}, callback:()=>any) \n{\n  if (data.colour == null)data.colour=\"grn\";\n  if (data.continueText == null) data.continueText=\"Continue\";\n  if (data.hasButton == null) data.hasButton=true;\n  if (data.ico == null) data.ico = \"arrow_forward\";\n  if (data.title == null) data.title = \"Information\";\n  let div = document.createElement(\"div\");\n  div.className=\"ALERT_NONBLOCK OPEN\";\n  div.isOpen = true;\n  div.innerHTML = `\n\n  <div class=\"content ${data.hasButton?\"hasBtn\":\"\"}\" data-fullscreen=no>${data.text}</div>`; // yes, it can be html'd\n  let draggable = document.createElement(\"div\");\n\n  draggable.className = \"ALERT_DRAGGER\";\n  draggable.innerHTML = `<span>${data.title}</span>`;\n  draggable.innerHTML += `<div class=\"close\" onclick=\"closeNBD(this.parentElement.parentElement, false)\">\n  <span class=\"red nooutline material-symbols-outlined\">close</span>\n  </div> \n  <div class=\"close fullscr\" onclick=\"toggleNBDFullScr(this.parentElement.parentElement.querySelector('.content'), false)\">\n  <span class=\"blu nooutline material-symbols-outlined\">fullscreen</span>\n  </div>`\n  div.prepend(draggable);\n  div.callback=callback;\n  document.body.appendChild(div);\n  setTimeout(()=>{\n    div.style.opacity=\"1\";\n    div.style.pointerEvents=\"auto\";  \n    draggable.onpointerdown = pointerDown;\n  }, 20);\n  let button = document.createElement(\"button\");\n  // div.appendChild(document.createElement(\"br\"));\n  if (data.hasButton) {\n    div.appendChild(button);\n    button.outerHTML = `\n    <button class=\"${data.colour} btn fsmed closeBtn\" onclick=\"closeNBD(this.parentElement, true)\">\n    <span class='material-symbols-outlined'>${data.ico}</span>\n    ${data.continueText}<div class=\"anim\"></div>\n    </button>`;\n  }\n  return div;\n}\n\nfunction closeNBD(ele:HTMLElement, confirmQ:boolean) {\n  ele.style.opacity=\"0\";\n  ele.isOpen = false;\n  ele.style.pointerEvents = \"none\";\n  ele.classList.remove(\"OPEN\");\n  if (confirmQ) ele.callback(ele.querySelector(\".content\"));\n}\n\n// let TIME:NodeJS.Timeout|null;\nlet ALERTOPEN = false;\n// let cbk: () => any = () => { };\n// let BLOCKCALLBACK = false;\nfunction alertDialog(str: string, callback: () => any = ()=>{}, requiresConfirmation = false) {\n  // if (TIME) clearTimeout(TIME);\n  // TIME = null;\n  // e.preventDefault();\n  let newDialog = document.createElement(\"dialog\");\n  try {dialogPolyfill.registerDialog(newDialog);}\n  catch(e:any) {}\n  // catch (e:Exception) {str += \"\\n\\nAdditionally, an error occurred while loading dialogs: \"+e}\n  document.body.appendChild(newDialog);\n  newDialog.className = \"internal ALERT\";\n  newDialog.id=\"internal_alerts\";\n\n  // newDialog.style.opacity = \"0\";\n  newDialog.style.textAlign=\"center\";\n  newDialog.innerHTML = `\n    <p class=\"fsmed\" id=\"alerttext_v2\">Error: AlertDialog configured incorrectly. Please contact BetaOS.</p>\n    <div style=\"text-align: center;\"><button id=\"confirmbtn\" class=\"btn szHalf override\" onclick=\"console.log('ConfirmClick'); closeAlert(1)\" style=\"display: inline-block\">\n      <span class=\"alertlbl\">Continue</span>\n      <span class=\"material-symbols-outlined\">arrow_forward_ios</span>\n      <div class=\"anim\"></div>\n    </button>\n    <button class=\"btn szHalf red override\" id=\"cancelBtn\" style=\"display: none\" onclick=\"console.log('RejectClick'); closeAlert(-1)\">\n      <span class=\"alertlbl\">Cancel</span>\n      <span class=\"material-symbols-outlined\">cancel</span>\n      <div class=\"anim\"></div>\n    </button></div>`;\n\n  setTimeout(()=>{\n    newDialog.style.opacity=\"1\";\n    newDialog.style.top = \"18px\";\n  }, 0);\n  newDialog.setAttribute(\"type\", requiresConfirmation+\"\")\n  // newDialog.setAttribute(\"callback\", callback.toString())\n\n  // here we add a new attribute to the element, hoping that nothing breaks\n  newDialog.callback = callback; \n  let overlay = document.getElementById(\"overlayL\");\n  if (overlay) {\n    overlay.style.opacity=\"0\";\n  }\n  let ele = document.getElementById(\"overlay\") as HTMLDivElement;\n  if (ele) ele.innerHTML=\"\";\n  let p = newDialog.querySelector(\"#alerttext_v2\");\n  if (!ele || !p) {\n    console.log(\"ERROR: Alert dialogs not enabled in this page.\")\n    callback();\n    return;\n  }\n\n  ele.style.opacity=\"1\";\n  // newDialog.style.opacity=\"1\";\n  // newDialog.style.top = \"0vh \";\n  newDialog.style.pointerEvents=\"auto\";\n  ALERTOPEN = true;\n  p.innerText = str;\n  p.innerHTML += \"<br><br><p style='margin: 10px auto' class='gry nohover'>(Press ENTER or ESC)</p>\"\n  newDialog.querySelector(\"#cancelBtn\").style.display = \"none\";\n  // if (button == 1) {\n  //   p.innerHTML += `<button class='btn szThird fssml' id=\"resend\" onclick='closeAlert(-1); send(decodeURIComponent(\"${encodeURIComponent(failedReq)}\"), (res)=>{this.parentElement.parentElement.callback(res);})'>\n  //   <span class=\"material-symbols-outlined\">history</span> Retry?\n  //   <div class=\"anim\"></div></button>`\n  //   newDialog.querySelector(\"#cancelBtn\").style.display=\"inline-block\";\n  //   newDialog.querySelector(\"#confirmbtn\").style.display=\"none\";\n  //   newDialog.querySelector(\"#cancelBtn\").querySelector(\".alertlbl\").innerText = \"Close\"\n  // }\n  if (requiresConfirmation) {\n    newDialog.querySelector(\"#cancelBtn\").style.display = \"inline-block\";\n    console.log(\"Alert-type CANCELLABLE\");\n  }\n  else console.log(\"Alert-type: STANDARD\");\n  newDialog.showModal();\n  // if (failureTimeout) clearTimeout(failureTimeout);\n  // failureTimeout = null;\n}\n\n// three ways to close a dialog. \n// acknowledged a callback (enter key)\n// cancelled a callback (escape key) - only for type-two\n// clicked outside (depends on alert type)\nfunction closeAlert(sel:number) {\n  let ele = document.getElementById(\"overlay\") as HTMLDivElement;\n  // let dialog = \n  let coll = document.getElementsByClassName(\"ALERT\");\n  let dialog = coll.item(coll.length-1);\n  if (!dialog) return;\n  let overridecallback=false;\n  if ((dialog.getAttribute(\"type\")==\"true\" || dialog.getAttribute(\"type\")==\"2\" )&& sel < 0) \n    overridecallback = true;\n  if (!ele) {\n    console.log(\"Alert dialogs not enabled in this page\");\n    return;\n  }\n\n  dialog.style.top = \"50vh\";\n  dialog.style.opacity=\"0\";\n  dialog.style.pointerEvents=\"none\";\n  if (!overridecallback) {\n    try {dialog.callback(); }\n    catch (e:any) {alertDialog(\"Error while calling back: \"+e, ()=>{});}\n  }\n  // can't remove t he damn dialog because we want it to fade out first\n  // so instead we change its class name so it does not get found again\n  setTimeout(()=>{dialog.close()}, 500);\n  dialog.className = \"internal CLOSEDALERT\";\n  dialog.id=\"CLOSEDALERT\";\n  // dialog.remove();\n\n\n  // eval(\"(()=>{\"+dialog.getAttribute(\"callback\")+\"})()\");\n  // dialog.\n  if (!dialogsActive()) { // if no alerts are open AND form-dialog is not open\n    ALERTOPEN = false;\n    ele.style.opacity=\"0\";\n    ele.style.pointerEvents=\"none\";\n  }\n  // if (cbk && !overrideCallback) {\n  //   // cbk();\n  // }\n}\n\nfunction keydown(e: Event) {\n  if (e.defaultPrevented) {\n    console.log(\"prevent-defaulted\");\n    return;\n  }\n  if (byId(\"ftrNav\") && e.key == \"/\" && e.target.nodeName != \"TEXTAREA\" && (e.target.nodeName != \"INPUT\" || \n                       (e.target.type!=\"text\" && e.target.type!=\"password\"))) {\n    location.href=\"#ftrNav\";\n    byId(\"ftrNav\").focus();\n    e.preventDefault();\n    return;\n  }\n  if(ALERTOPEN && !DIALOGOPEN && (e.key == \"Escape\"||e.key == \"Enter\")) {\n    e.preventDefault();\n    if (e.key == \"Escape\") {\n      console.log(\"RejectKey\")\n      closeAlert(-1);\n    }\n    else {\n      console.log(\"ConfirmKey\")\n      closeAlert(1);\n    }\n  }\n  if (!ALERTOPEN && !DIALOGOPEN && \n      (e.target.nodeName == \"INPUT\" || e.target.nodeName == \"TEXTAREA\") &&\n      e.key == \"Escape\") \n  {\n    e.target.blur();\n  }\n}\n\nfunction suffix(i:number) \n{\n  // 11st is wrong, it is 11th. 111st is also wrong, and so is 1011th... 21st OK\n  if (i%10==1 && i%100 != 11) return \"st\";\n  // 12nd is wrong, so is 112, etc...\n  if (i%10==2 && i%100 != 12) return \"nd\";\n  if (i%10==3 && i%100 != 13) return \"rd\";\n  return \"th\";\n}\nfunction toTime(ms: number, inclMs:boolean=false) {\n  let day = Math.floor(ms / 1000 / 60 / 60 / 24);\n  ms = ms % (1000 * 60 * 60 * 24);\n  let hr = Math.floor(ms / 1000 / 60 / 60);\n  ms = ms % (1000 * 60 * 60);\n  let min = Math.floor(ms / 1000 / 60);\n  ms = ms % (1000 * 60);\n  let sec = Math.floor(ms / 1000);\n  if (ms < 0) return \"00:00:00\";\n  return (day > 0 ? day + \"d \" : \"\") + padWithZero(hr) + \":\" + padWithZero(min) + \":\" + padWithZero(sec)+(inclMs?\".\"+padWithThreeZeroes(ms%1000):\"\");\n}\n\nfunction minimalTime(ms:number, inFuture:boolean=false) {\n  if (isNaN(ms)) return \"unknown time\"\n  if (ms < 60000) return inFuture?\"shortly\":\"just now\";\n  let day = Math.floor(ms / 1000 / 60 / 60 / 24);\n  ms = ms % (1000 * 60 * 60 * 24);\n  let hr = Math.floor(ms / 1000 / 60 / 60);\n  ms = ms % (1000 * 60 * 60);\n  let min = Math.floor(ms / 1000 / 60);\n  ms = ms % (1000 * 60);\n  return (day > 0 ? day + \"d \" : \"\") + (hr > 0?(hr+\"h\"):\"\") + min+\"m\";\n}\n\n\nfunction padWithThreeZeroes(n:number) {\n  if (n < 10) return \"00\"+n;\n  if (n < 100) return \"0\"+n;\n  return n;\n}\nfunction padWithZero(n: number) {\n  return n < 10 ? \"0\" + n : n;\n}\n\nlet overlay:HTMLDivElement;\nconst tips = [\"Press <kbd>/</kbd> to jump to a page\", \"\uD83E\uDDC0\", \n              \"Have you tried turning it off and on again?\",\n              \"Try <a href='/clickit'>ClickIt</a> today!\",\n             \"Your insanity will pay off. Eventually.\",\n             \"Don't worry! It's fine... We can fix it!\",\n             \"Help! I've fallen and can't get back up again!\",\n             \"Tofu is solidified bean water. On that note, try Humanity(r) Bean Water today!\",\n             \"The void orb watches over you.\"];\n\naddEventListener(\"DOMContentLoaded\", function() {\n  overlay = document.createElement(\"div\");\n  overlay.className = \"overlayLoader\"\n  overlay.id = \"overlayL\";\n  // overlay.style.left=\"0vh\";\n  overlay.style.backgroundColor=\"var(--system-overlay)\";\n  overlay.style.opacity=\"0\"; // no more loader at start\n  overlay.style.pointerEvents = \"none\"; // no more loader at start\n  overlay.innerHTML = `<div id=\"overlayLContainer\" style='pointer-events:none;'>\n  <p class=\"fslg grn nohover\">Loading.</p>\n  <span class=\"material-symbols-outlined loader\">sync</span>\n  <hr class=\"rounded\">\n  </div>`\n  // document.appendChild(document.createElement(\"body\"));\n  document.body.appendChild(overlay);\n\n  // screw with the meta tags\n  let metatags = document.createElement(\"meta\");\n  metatags.content = \"width=device-width, initial-scale=1.0, min-scale=1.0\";\n  metatags.name = \"viewport\";\n  document.head.appendChild(metatags);\n});\n\nlet DIALOGOPEN = false;\nfunction closeDialog(thing:()=>any, name:string=\"dialog\") {\n  let div = document.getElementById(name);\n  div.style.top = \"50%\";\n  div.style.opacity=\"0\";\n  div.style.pointerEvents=\"none\";\n  DIALOGOPEN=false;\n  let ele = byId(\"overlay\");\n  if (!dialogsActive()) { // if no alerts are open AND form-dialog is not open\n    ALERTOPEN = false;\n    ele.style.opacity=\"0\";\n    ele.style.pointerEvents=\"none\";\n  }\n  thing();\n\n  // document.getElementById(\"startBtn\").focus();\n}\n\nfunction dialogsActive() {\n  return document.getElementsByClassName(\"ALERT\").length>0 || DIALOGOPEN;\n}\n\nfunction openDialog(name:string=\"dialog\") {\n  let div = document.getElementById(name);\n  div.style.top = \"0px\";\n  div.style.opacity=\"1\";\n  div.style.pointerEvents=\"auto\";\n  // ???\n  DIALOGOPEN=true;\n  document.getElementById(\"overlay\").style.opacity = \"1\";\n  // document.getElementById(\"startBtn\").focus();\n  // document.getElementById(\"startBtn\").focus();\n}\n\nfunction mouseOver(e:MouseEvent) {\n  // let ele = e.target.closest(\".btn\")|| e.target;\n  // let text = ele.innerHTML.replaceAll(/<.*((>.*<\\/.*>)|(\\/>))/gmiu, \"\").replaceAll(\"\\n\", \"\").trim();\n  // if (ele.getAttribute(\"tooltip\")) text = ele.getAttribute(\"tooltip\");\n\n  // if (typeof ele.className != \"string\") return;\n  // if (ele.className.match(/(\\W|^)btn(\\W|$)/) && !ele.className.match(/(\\W|^)notooltip(\\W|$)/)) {\n  //   let tooltip = ele.children.namedItem(\"TOOLTIP\");\n  //   if (!tooltip && text != \"\") {\n  //     tooltip = document.createElement(\"span\");\n  //     tooltip.innerText = text;\n  //     tooltip.id=\"TOOLTIP\";\n  //     tooltip.className=\"TOOLTIP override\"\n  //     ele.appendChild(tooltip);\n  //     ele.style.animation = 'none';  \n  //     ele.offsetHeight; /* trigger reflow */   \n  //     ele.style.animation = null; \n  //   }\n  // }\n}\n\nfunction resetExpiry(res:any) {\n  if (res.data.expiry < Date.now() || res.data.expiry - Date.now() > 9e60) {\n    return;\n    //alertDialog(\"Error: Your session has expired!\", ()=>{location.href = \"/login?redirect=\"+window.location.pathname});\n  }\n  SESSIONTIMEOUT = setTimeout(()=>{\n    alertDialog(\"Your session has expired\", ()=>{\n      location.reload();\n    })\n  }, res.data.expiry - Date.now());\n  SESSIONTIMEOUT2 = setTimeout(()=>{\n    // document.title = \"\"+document.title;\n    alertDialog(\"Your session is expiring in one minute, extend session? \", ()=>{\n      send(JSON.stringify({action:\"extendSession\"}), (res:{data:{expiry:number}})=>{\n        alertDialog(\"Session extended, expires in \"+toTime(res.data.expiry - Date.now()), ()=>{});\n        clearTimeout(SESSIONTIMEOUT);\n        clearTimeout(SESSIONTIMEOUT2);\n        resetExpiry(res);\n      });\n    }, true)\n  }, Math.max(res.data.expiry - Date.now() - 60000, 1000))\n}\n\nfunction whichTransitionEvent(){\n    var t;\n    var el = document.createElement('fakeelement');\n    var transitions = {\n      'transition':'transitionend',\n      'OTransition':'oTransitionEnd',\n      'MozTransition':'transitionend',\n      'WebkitTransition':'webkitTransitionEnd'\n    }\n\n    for(let t in transitions){\n        if( el.style[t] !== undefined ){\n            return transitions[t];\n        }\n    }\n}\n\nfunction ephemeralDialog(text:string) \n{\n  let dialog = document.createElement(\"div\");\n  dialog.classList.add(\"ephemeral\");\n  dialog.innerHTML = text;\n  dialog.style.animation = \"appear 1s forwards\";\n  byId(\"ephemerals\").prepend(dialog);\n  setTimeout(()=>{\n    closeEphemeral(dialog)\n  }, 10000);\n  dialog.onclick = ()=>{closeEphemeral(dialog)}\n}\nfunction closeEphemeral(dialog:HTMLDivElement) \n{\n  dialog.style.animation = \"disappear 0.6s forwards\";\n  setTimeout(()=>{dialog.remove()}, 600); // because it's got some weird stuff going on\n}\nlet loginDialog = null;\nfunction login_v2(ev:any, signup:boolean=false) \n{\n  if (ev) ev.preventDefault();\n  if (loginDialog && loginDialog.isOpen) return; // do not open TWO \n  loginDialog = nonBlockingDialog({\n    text:`<iframe class=\"loginiframe\" src=\"/minimal${signup?\"Signup\":\"Login\"}\"></iframe>`, \n    hasButton:false,\n    title:signup?\"Register\":\"Login\"}, null);\n  toggleNBDFullScr(loginDialog.querySelector(\".content\"))\n}\n\n\n\nfunction closeLogin()\n{\n  closeNBD(loginDialog);\n}\n\nfunction globalReload() \n{\n  // BROKEN: DO NOT ATTEMPT TO DO THIS.\n  location.reload();\n  // byId(\"overlay\").remove();\n  // // byId(\"overlayL\").remove();\n  // byId(\"compliance\").remove();\n  // byId(\"footer\").remove();\n  // let uSidebar = byClass(\"sidebar-unstable\");\n  // if (uSidebar) uSidebar.remove();\n  // byId(\"ephemerals\").remove();\n  // globalOnload(onloadCallback);\n}\n\nfunction logout_v2(event) \n{\n  event.preventDefault()\n  send(JSON.stringify({action: \"logout\"}), (res)=>{\n    ephemeralDialog(\"Successfully logged out!\");\n    location.reload(); // some things do not reset properly on logout.\n  })\n}\n\nfunction hashIt(str, seed = 0) {\n  let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;\n  for(let i = 0, ch; i < str.length; i++) {\n      ch = str.charCodeAt(i);\n      h1 = Math.imul(h1 ^ ch, 2654435761);\n      h2 = Math.imul(h2 ^ ch, 1597334677);\n  }\n  h1  = Math.imul(h1 ^ (h1 >>> 16), 2246822507);\n  h1 ^= Math.imul(h2 ^ (h2 >>> 13), 3266489909);\n  h2  = Math.imul(h2 ^ (h2 >>> 16), 2246822507);\n  h2 ^= Math.imul(h1 ^ (h1 >>> 13), 3266489909);\n\n  return 4294967296 * (2097151 & h2) + (h1 >>> 0);\n};\n\n/* BETTERSELECT SELECT DIALOGS */\nlet bSelVersion=\"v4\";\n\nfunction clickSelect(whichOne, openQ=0) \n{\n  // console.log(\"which one?\", whichOne);\n  let ctn = byId(whichOne);\n  // console.log(ctn);\n  // console.log(openQ);\n  if (openQ != 0) ctn.selectOpen = (openQ==1);\n  else ctn.selectOpen=!ctn.selectOpen;\n  // console.log(ctn.selectOpen);\n\n  if (!ctn) {\n    console.error(\"No container found!\");\n    return;\n  }\n  // if open then close all others\n  // if (ctn.selectOpen)\n  // {\n    // if (currOpen) clickSelect(currOpen, -1);\n    // currOpen = whichOne;\n  // }\n  let inp = ctn.querySelector(\".betterSelect\");\n  inp.readOnly=!ctn.selectOpen;\n  inp.style.cursor = ctn.selectOpen?\"text\":\"pointer\";\n  ctn.querySelector(\".optionMenu\").className = \"optionMenu \"+ (ctn.selectOpen?\"open\":\"\");\n  // if (!ctn.selectOpen) {\n  {\n    inp.value = \"\";\n    // check if value is valid\n    let children = inp.nextElementSibling.children;\n    let valid = ctn.selectOpen; // valid if open\n    for (let i=0; i<children.length; i++) {\n      if (inp.selectedVal == children[i].innerText) { \n        valid = true;\n        inp.bSelValid = true;\n      }\n      if (ctn.selectOpen) children[i].tabIndex = 0;\n      else children[i].tabIndex=-1;\n    }\n    if (valid) {\n      // console.log(\"valid\");\n      inp.placeholder = inp.selectedVal?inp.selectedVal:\"Make a selection...\";\n      inp.classList.remove(\"invalid\");\n    }\n    else if (inp.selectedVal != undefined) {\n      inp.selectedVal = \"\";\n      inp.bSelValid = false;\n      inp.classList.add(\"invalid\");\n      inp.placeholder = \"Invalid selection\";\n    }\n  } // true\n}\n\nfunction enterEvent(inp:HTMLInputElement, e:Event) \n{\n  if (!e.target.classList.contains(\"betterSelect\"))\n    inp.value = e.target.innerText;\n  inp.selectedVal = inp.value;\n  // console.log('enter');\n  clickSelect(inp.parentElement.id);\n  inp.focus();\n  // console.log(inp.valueMap.get(inp.selectedVal));\n  if (inp.bSelValid) // console.log(inp.parentElement);\n    inp.parentElement.value = inp.valueMap.get(inp.selectedVal);\n  if (inp.bSelOnChangeEvent && inp.bSelValid) {\n    inp.bSelOnChangeEvent(inp.selectedVal, inp.valueMap.get(inp.selectedVal));\n  }\n  e.preventDefault();\n}\nlet registered = [];\nfunction bSelRegister(id:string, onChange:()=>any, defaultVal:string) \n{\n  let ctn = byId(id);\n  registered.push(id);\n  let inp = ctn.querySelector(\".betterSelect\");\n  inp.bSelOnChangeEvent = onChange;\n  // console.log(onChange);\n  inp.valueMap = new Map();\n  let children = inp.nextElementSibling.children;\n  for (let i=0; i<children.length; i++) {\n    inp.valueMap.set(children[i].innerText, children[i].getAttribute(\"val\") || children[i].getAttribute(\"value\"));\n  }\n  if (defaultVal) {\n    ctn.value=inp.valueMap.get(defaultVal);\n    inp.selectedVal = defaultVal;\n    inp.value=defaultVal;\n    inp.placeholder = defaultVal;\n  }\n  else inp.placeholder = \"Make a selection...\";\n  inp.addEventListener(\"pointerdown\", (e)=>{\n    // console.log(e.target);\n    // console.log(\"pointerdown\");\n    for (let i=0; i<registered.length; i++) \n      clickSelect(registered[i], -1);\n    clickSelect(e.target.parentElement.id, 1);\n    e.preventDefault();\n  });\n  ctn.addEventListener(\"pointerup\", (e)=>{\n    if (e.target.classList.contains(\"option\")) \n    {\n      let inp = e.target.parentElement.parentElement.querySelector(\"input\");\n      // e.target.focus()\n      enterEvent(inp, e);\n    }\n  })\n  inp.bSelValid = false;\n}\n\nfunction bSelInitialise() {\n  console.log(\"Initialising BetterSelects\");\n  // bSelRegister(\"selCtn\", (value)=>{console.log(value);});\n  // <!-- bSelRegister(\"selCtn2\"); -->\n  document.addEventListener(\"pointerup\", (e)=>{\n    if (!e.target || e.target instanceof HTMLDocument) return; // released outside the doc\n    if (e.target.closest(\".bSel\")) return;\n    // console.log(\"clicked away\");\n    for (let i=0; i<registered.length; i++) \n      clickSelect(registered[i], -1);\n  })\n  document.addEventListener(\"keydown\", (e)=>\n  {\n    if (!e.target.classList.contains(\"betterSelect\") \n     && !e.target.classList.contains(\"option\")) return;\n    // console.log(e.key);\n    let inp;\n    if (!e.target.classList.contains(\"betterSelect\")) \n      inp = e.target.parentElement.parentElement.querySelector(\"input\");\n    else inp = e.target;\n    switch (e.key) \n    {\n      case \" \":\n        if (e.target.classList.contains(\"betterSelect\"))\n          break;\n      case \"Enter\":\n        enterEvent(inp, e);\n        return;\n      case 'Escape':\n        clickSelect(inp.parentElement.id, -1);\n        inp.value = \"\";\n        // e.preventDefault();\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        clickSelect(inp.parentElement.id, 1);\n        if (e.target.classList.contains(\"option\")) \n          if (e.target.nextElementSibling)\n            e.target.nextElementSibling.focus();\n          else \n            e.target.parentElement.children[0].focus();\n        else \n          e.target.nextElementSibling.children[0].focus();\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        clickSelect(inp.parentElement.id, 1);\n        if (e.target.classList.contains(\"option\")) \n          if (e.target.previousElementSibling)\n            e.target.previousElementSibling.focus();\n          else \n            e.target.parentElement.lastElementChild.focus();\n        else \n          // console.log(e.target.nextElementSibling);\n          e.target.nextElementSibling.lastElementChild.focus();\n      break;\n      default:\n        if (e.key.length == 1 && !e.target.classList.contains(\"betterSelect\")) // nothing stupid likee backspace/etc \n        {\n          let inp = e.target.parentElement.parentElement.querySelector(\"input\");\n          // inp.value = e.key;\n          inp.focus();\n\n        }\n    } // switch (key)\n  })\n};\n\n\n\nfunction getCSSProp(name:string){\n  return getComputedStyle(document.body).getPropertyValue(name);\n} "],
  "mappings": "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",
  "names": ["res", "overlay", "t", "inp"]
}
